https://gpcoder.com/2883-huong-dan-su-dung-java-reflection/
--- Äá»‘i tÆ°á»£ng class
Má»i class khi Ä‘Æ°á»£c jvm náº¡p vÃ o bá»™ nhá»› Ä‘á»u Ä‘Æ°á»£c biá»ƒu diá»…n bá»Ÿi má»™t Ä‘á»‘i tÆ°á»£ng Ä‘áº·c biá»‡t thuá»™c lá»›p java.lang.Class.
nÃ³i cÃ¡ch khÃ¡c: Class chÃ­nh lÃ  class mÃ´ táº£ class khÃ¡c (metadata).
nÃ³ chá»©a thÃ´ng tin Ä‘á»ƒ jvm vÃ  developer biáº¿t:
tÃªn class,
package,
cha, interface,
cÃ¡c field, method, constructor, annotationâ€¦
VD:
Cat cat = new Cat();          // táº¡o object Cat
Class<?> c1 = Cat.class;      // láº¥y Ä‘á»‘i tÆ°á»£ng Class trá»±c tiáº¿p
Class<?> c2 = cat.getClass(); // láº¥y Ä‘á»‘i tÆ°á»£ng Class tá»« object
c1 vÃ  c2 Ä‘á»u lÃ  cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng Class, Ä‘áº¡i diá»‡n cho class Cat.
báº¡n khÃ´ng thá»ƒ â€œnew Class()â€, mÃ  chá»‰ cÃ³ jvm táº¡o vÃ  quáº£n lÃ½ cÃ¡c object Class.

ğŸ‘‰ Äá»‘i tÆ°á»£ng Class lÃ  Ä‘áº¡i diá»‡n (metadata) cho má»™t class trong jvm, chá»©a toÃ n bá»™ thÃ´ng tin mÃ´ táº£ class Ä‘Ã³.
--- Náº¡p Class Ä‘á»™ng
try {
    Class c =  Class.forName("com.gpcoder.Cat");
	System.out.println(c.getName()); // in ra "com.gpcoder.Cat"
		(LÃºc nÃ y báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng Class (metadata vá» class Cat).
		NhÆ°ng báº¡n chÆ°a cÃ³ Ä‘á»‘i tÆ°á»£ng Cat nÃ o cáº£.)
} catch (ClassNotFoundException e) {
    System.err.println(e);
}
ğŸ”¸ÄÃ¢y lÃ  cÃ¡ch náº¡p (load) class Ä‘á»™ng báº±ng tÃªn (string).
"com.gpcoder.Cat" lÃ  tÃªn Ä‘áº§y Ä‘á»§ (fully qualified name) cá»§a class Cat trong package com.gpcoder.
Khi cháº¡y, JVM sáº½:
TÃ¬m file class com/gpcoder/Cat.class trong classpath.
Náº¡p class Ä‘Ã³ vÃ o bá»™ nhá»›.
Tráº£ vá» Ä‘á»‘i tÆ°á»£ng Class Ä‘áº¡i diá»‡n cho class Cat
ğŸ”¸Náº¿u báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng, cÃ³ thá»ƒ láº¥y Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng Class.
Cat cat = new Cat();
Class c = cat.getClass();
System.out.println(c.getName());          // in ra tÃªn Ä‘áº§y Ä‘á»§: com.gpcoder.Cat
System.out.println(c.getSimpleName());    // in ra tÃªn ngáº¯n: Cat
System.out.println(c.getPackageName());   // in ra package: com.gpcoder

ğŸ‘‰cat.getClass() â†’ cáº§n cÃ³ sáºµn má»™t object rá»“i má»›i láº¥y ra Class.
  Cat.class â†’ láº¥y trá»±c tiáº¿p Ä‘á»‘i tÆ°á»£ng Class tá»« tÃªn class, khÃ´ng cáº§n táº¡o object.
  Class.forName("com.gpcoder.Cat") â†’ láº¥y Class thÃ´ng qua tÃªn chuá»—i (cÃ³ thá»ƒ chÆ°a biáº¿t class cá»¥ thá»ƒ khi viáº¿t code).

--------
import java.lang.reflect.Field;
class Student {
    private Long id;
    public String name;
    protected int age;
}
public class TestReflection {
    public static void main(String[] args) throws Exception {
        Class<?> clazz = Student.class;
        // Láº¥y táº¥t cáº£ field (ká»ƒ cáº£ private/protected)
        Field[] fields = clazz.getDeclaredFields();
        for (Field f : fields) {
            System.out.println("Field: " + f.getName());
            System.out.println("   -> getType(): " + f.getType());      // Class<?> object
            System.out.println("   -> getType().getName(): " + f.getType().getName());  // tÃªn Ä‘áº§y Ä‘á»§
            System.out.println("   -> getType().getSimpleName(): " + f.getType().getSimpleName()); // tÃªn ngáº¯n
            System.out.println("---------------------");
        }

        // Láº¥y field private "id"
        Field idField = clazz.getDeclaredField("id");
        idField.setAccessible(true); // Cho phÃ©p truy cáº­p private

        // GÃ¡n giÃ¡ trá»‹ cho instance Student
        Student st = new Student();
        idField.set(st, 123L);  // gÃ¡n giÃ¡ trá»‹ 123L vÃ o private id

        // Láº¥y giÃ¡ trá»‹
        Object value = idField.get(st);
        System.out.println("GiÃ¡ trá»‹ id = " + value);
    }
}
Field: id
   -> getType(): class java.lang.Long
   -> getType().getName(): java.lang.Long
   -> getType().getSimpleName(): Long
---------------------
Field: name
   -> getType(): class java.lang.String
   -> getType().getName(): java.lang.String
   -> getType().getSimpleName(): String
---------------------
Field: age
   -> getType(): int
   -> getType().getName(): int
   -> getType().getSimpleName(): int
---------------------
GiÃ¡ trá»‹ id = 123
getType() â†’ Tráº£ vá» má»™t Class object Ä‘áº¡i diá»‡n cho kiá»ƒu dá»¯ liá»‡u cá»§a field.
VÃ­ dá»¥: class java.lang.String, class java.lang.Long, hoáº·c int.

getType().getName() â†’ Tráº£ vá» tÃªn Ä‘áº§y Ä‘á»§ (fully qualified name) cá»§a kiá»ƒu.
VÃ­ dá»¥: "java.lang.String", "java.lang.Long", "int".

getType().getSimpleName() â†’ Tráº£ vá» tÃªn ngáº¯n gá»n (chá»‰ tÃªn class khÃ´ng cÃ³ package).
VÃ­ dá»¥: "String", "Long", "int".

getDeclaredField("id") â†’ Láº¥y field id (dÃ¹ lÃ  private).
setAccessible(true) â†’ Cho phÃ©p bá» qua kiá»ƒm tra truy cáº­p Ä‘á»ƒ thao tÃ¡c vá»›i private/protected field.

field.set(object, value) â†’ GÃ¡n giÃ¡ trá»‹ vÃ o field cá»§a object.
field.get(object) â†’ Láº¥y giÃ¡ trá»‹ field tá»« object (tráº£ vá» Object nÃªn cÃ³ thá»ƒ cáº§n Ã©p kiá»ƒu).

public static void queryNormal(BuildingSearchBuilder buildingSearchBuilder,StringBuilder where) {
	try {
		Field[] fields = BuildingSearchBuilder.class.getDeclaredFields();
		for(Field item : fields) {
//field.setAccessible(true) cho phÃ©p :Äá»c,ghi giÃ¡ trá»‹ private,DÃ¹ng reflection vá»›i báº¥t ká»³ access modifier nÃ o
			item.setAccessible(true);
//			.getName() tráº£ vá» tÃªn cá»§a phÆ°Æ¡ng thá»©c dÆ°á»›i dáº¡ng String.VÃ­ dá»¥, náº¿u class cÃ³ private String name; â†’ fieldName = "name".	tÆ°Æ¡ng tá»± .getStaffId()		
			String fieldName = item.getName();
			if(!fieldName.equals("staffId")&&!fieldName.equals("typeCode")
					&&!fieldName.startsWith("area")&&!fieldName.startsWith("rentPrice")) {
//			Láº¥y giÃ¡ trá»‹ cá»§a field item qua instance, tráº£ vá» object public Object get(Object obj)
				Object value = item.get(buildingSearchBuilder);
				if(value != null) {
					if(item.getType().getName().equals("java.lang.Long")||item.getType().getName().equals("java.lang.Integer")) {
						where.append(" AND b."+fieldName+" = "+value);
					}
					else {
						where.append(" AND b."+fieldName+" LIKE '%"+value+"%' ");
					}
				}
			}
			
		}
	}
	catch (Exception e) {
		e.printStackTrace();	}
}
