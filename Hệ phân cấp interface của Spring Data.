JpaRepository
   ‚Üë
PagingAndSortingRepository
   ‚Üë
CrudRepository

1. CrudRepository<T, ID> ‚Äî n·ªÅn t·∫£ng th·∫•p nh·∫•t
üëâM·ª•c ƒë√≠ch: Cung c·∫•p CRUD c∆° b·∫£n nh·∫•t cho entity.

Khai b√°o
public interface CrudRepository<T, ID> {
    <S extends T> S save(S entity);
    Optional<T> findById(ID id);
    Iterable<T> findAll();
    void deleteById(ID id);
    void delete(T entity);
    long count();
    boolean existsById(ID id);
}

ƒê·∫∑c ƒëi·ªÉm
Nh·∫π nh·∫•t
Tr·∫£ v·ªÅ Iterable
Kh√¥ng c√≥ paging, sorting

2. PagingAndSortingRepository<T, ID>
K·∫ø th·ª´a t·ª´
public interface PagingAndSortingRepository<T, ID>
        extends CrudRepository<T, ID>

B·ªï sung
Iterable<T> findAll(Sort sort);
Page<T> findAll(Pageable pageable);

√ù nghƒ©a:
Th√™m ph√¢n trang (Paging) v√† s·∫Øp x·∫øp (Sorting)

Khi n√†o d√πng:
C√≥ danh s√°ch l·ªõn
C·∫ßn ph√¢n trang

3. JpaRepository<T, ID> ‚Äî c·∫•p cao nh·∫•t (hay d√πng nh·∫•t)
K·∫ø th·ª´a t·ª´
public interface JpaRepository<T, ID>
        extends PagingAndSortingRepository<T, ID>

B·ªï sung th√™m:
List<T> findAll();
List<T> findAll(Sort sort);
void flush();
<S extends T> S saveAndFlush(S entity);
void deleteInBatch(Iterable<T> entities);

ƒê·∫∑c ƒëi·ªÉm:
Tr·∫£ v·ªÅ List thay v√¨ Iterable
C√≥ batch operation
C√≥ flush() (ƒë·ªìng b·ªô ngay v·ªõi DB)
G·∫Øn ch·∫∑t v·ªõi JPA / Hibernate

Khi n√†o d√πng:
üëâ G·∫¶N NH∆Ø LU√îN LU√îN d√πng JpaRepository

4. So s√°nh t·ªïng h·ª£p
Repository	                CRUD	Paging	Sorting	Batch	Flush
CrudRepository	            ‚úÖ	  ‚ùå	      ‚ùå	  ‚ùå  	‚ùå
PagingAndSortingRepository	‚úÖ	  ‚úÖ	      ‚úÖ  	‚ùå  	‚ùå
JpaRepository	              ‚úÖ	  ‚úÖ	      ‚úÖ	  ‚úÖ	  ‚úÖ


1. C√°c Interface thao t√°c d·ªØ li·ªáu c∆° b·∫£n
C√°c interface n√†y n·∫±m trong package org.springframework.data.repository.

CrudRepository
Cung c·∫•p c√°c thao t√°c t·∫°o, ƒë·ªçc, c·∫≠p nh·∫≠t v√† x√≥a c∆° b·∫£n.

save(entity: S): S
findById(id: ID): Optional<T>
existsById(id: ID): boolean
count(): long
deleteById(id: ID): void
delete(entity: T): void
deleteAllById(ids: Iterable<? extends ID>): void
deleteAll(entities: Iterable<? extends T>): void
deleteAll(): void
ListCrudRepository
T∆∞∆°ng t·ª± nh∆∞ CrudRepository nh∆∞ng tr·∫£ v·ªÅ List thay v√¨ Iterable cho c√°c ph∆∞∆°ng th·ª©c t√¨m ki·∫øm.

saveAll(entities: Iterable<S>): List<S>
findAll(): List<T>
findAllById(ids: Iterable<ID>): List<T>

2. C√°c Interface Ph√¢n trang v√† S·∫Øp x·∫øp
H·ªó tr·ª£ vi·ªác l·∫•y d·ªØ li·ªáu theo t·ª´ng trang ho·∫∑c s·∫Øp x·∫øp k·∫øt qu·∫£ tr·∫£ v·ªÅ.

PagingAndSortingRepository
findAll(pageable: Pageable): Page<T>

ListPagingAndSortingRepository
findAll(sort: Sort): List<T>

3. Interface JpaRepository
ƒê√¢y l√† interface ph·ªï bi·∫øn nh·∫•t khi l√†m vi·ªác v·ªõi Spring Data JPA, n√≥ k·∫ø th·ª´a t·ª´ c√°c interface tr√™n v√† b·ªï sung c√°c ph∆∞∆°ng th·ª©c ƒë·∫∑c th√π cho JPA (nh∆∞ flush, x√≥a theo l√¥).

JpaRepository
flush(): void
saveAndFlush(entity: S): S
saveAllAndFlush(entities: Iterable<S>): List<S>
deleteAllInBatch(entities: Iterable<T>): void
deleteAllByIdInBatch(ids: Iterable<ID>): void
deleteAllInBatch(): void
getOne(id: ID): T (L∆∞u √Ω: hi·ªán nay th∆∞·ªùng d√πng getReferenceById)
getReferenceById(id: ID): T
findAll(example: Example<S>): List<S>
findAll(example: Example<S>, sort: Sort): List<S>
deleteInBatch(entities: Iterable<T>): void

4. Truy v·∫•n theo v√≠ d·ª• (Query By Example)
Interface n√†y gi√∫p t·∫°o truy v·∫•n d·ª±a tr√™n m·ªôt ƒë·ªëi t∆∞·ª£ng m·∫´u c√≥ s·∫µn.

QueryByExampleExecutor
findOne(example: Example<S>): Optional<S>
findAll(example: Example<S>, pageable: Pageable): Page<S>
count(example: Example<S>): long
exists(example: Example<S>): boolean
findBy(example: Example<S>, queryFunction: Function<FetchableFluentQuery<S>, R>): R
