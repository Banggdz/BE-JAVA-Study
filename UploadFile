Browser chá»n áº£nh
 â†“
POST /api/files/product
 â†“
Spring lÆ°u file vÃ o /uploads/products/
 â†“
Backend tráº£ URL /uploads/products/a.jpg
 â†“
<img src="/uploads/products/a.jpg">
 â†“
FileConfig map URL â†’ filesystem
 â†“
áº¢NH HIá»†N


1ï¸âƒ£ Táº¡o file config: FileConfig.java
Viá»‡c khai bÃ¡o ResourceHandler nháº±m nÃ³i vá»›i Spring ráº±ng cÃ¡c file tÄ©nh Ä‘Æ°á»£c phá»¥c vá»¥ tá»« thÆ° má»¥c uploads náº±m ngoÃ i classpath, cÃ¹ng cáº¥p vá»›i src, thay vÃ¬ náº±m trong static.
Äiá»u nÃ y cho phÃ©p truy cáº­p file upload qua URL dáº¡ng:
http://localhost:8080/uploads/products/iphone.jpgnhÆ° thÃ´ng thÆ°á»ng Ä‘á»ƒ ko bá»‹ nÃ©n thÃ nh 1 jar, náº¿u Ä‘á»ƒ trong static sáº½ bá»‹ nÃ©n thÃ nh jar vÃ  khi upload file ko thá»ƒ ghi thÃªm vÃ o trong static khi app Ä‘ang cháº¡y
KhÃ´ng nÃªn lÆ°u file upload trong static vÃ¬ static lÃ  tÃ i nguyÃªn build-time vÃ  sáº½ bá»‹ Ä‘Ã³ng gÃ³i vÃ o JAR khi build á»©ng dá»¥ng. Trong khi Ä‘Ã³, file upload lÃ  dá»¯ liá»‡u runtime, phÃ¡t sinh khi á»©ng dá»¥ng Ä‘ang cháº¡y.Náº¿u cá»‘ upload vÃ o static thÃ¬ sao?
âŒ TrÃªn local (cháº¡y IDE)
CÃ³ thá»ƒ â€œtáº¡mâ€ ghi Ä‘Æ°á»£c

âŒ Khi deploy: Má»—i láº§n build láº¡i bá»‹ máº¥t sáº¡ch file
JAR read-only
Docker image read-only
Server khÃ´ng cho ghi
ğŸ‘‰
package com.example.online_shop.config;
@Configuration
public class FileConfig implements WebMvcConfigurer {
    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/uploads/**")
                .addResourceLocations("file:uploads/");
    }
}
