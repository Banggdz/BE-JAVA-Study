https://www.baeldung.com/jpa-hibernate-persistence-context
- Reference Documentation:
https://docs.spring.io/spring-data/data-jpa/docs/1.4.x/reference/htmlsingle/#repositories.query-methods
- ORM:
ORM là 1 kỹ thuật lập trình giúp ánh xạ các record dữ liệu trong hệ quản trị cơ sở dữ liệu sang dạng đối tượng đang định nghĩa trong các class
https://viblo.asia/p/object-relational-mapping-djeZ1PQ3KWz

https://www.tutorialspoint.com/jpa/jpa_architecture.htm
https://www.baeldung.com/jpql-hql-criteria-query
https://stackoverflow.com/questions/50322550/hibernate-dialect-for-mysql-8

 Làm việc với JPA có 2 cách chính:
- JPQL (Java Persistence Query Language) : Ngôn ngữ truy vấn hướng đối tượng (Object-Oriented Query Language).
+ Sử dụng hoàn toàn với các đối tượng Entity trong Java.
+ Truy vấn mang tính hướng đối tượng, không phụ thuộc vào cấu trúc bảng csdl, Khi chạy, Hibernate/EclipseLink sẽ dịch JPQL thành SQL gốc phù hợp với DB bạn dùng..
+ VD: String sql = "FROM BuildingEntity b";
      Query query = entityManager.createQuery(sql,BuildingEntity.class);
	  return query.getResultList();
👉 Ở đây:
+ BuildingEntity là tên Entity class.
+ b.name là thuộc tính trong class BuildingEntity.
+ Không quan tâm bảng thật trong DB tên gì (building, tbl_building, ...).

- Native Query
+ Viết truy vấn SQL thuần, gần giống như cách làm việc trực tiếp với cơ sở dữ liệu.
+ Dễ dàng tận dụng các tính năng đặc thù của hệ quản trị cơ sở dữ liệu.
+ VD: String sql = "FROM BuildingEntity b WHERE b.name like '%building%";
	  Query query = entityManager.createNativeQuery(sql,BuildingEntity.class);
	  return query.getResultList();
👉 Ở đây:
+ building là tên bảng trong DB.
+ name là tên cột thật trong bảng.
+ Câu query phụ thuộc vào loại DB (MySQL, Oracle, PostgreSQL…).
---- Persistent Context
- Một instance của EntityManager được gắn với một persistence context. Persistence context là tập hợp các entity, trong đó mỗi định danh entity chỉ tồn tại duy nhất một instance. 
Bên trong persistence context, các entity và vòng đời của chúng được quản lý. 
EntityManager API được dùng để tạo, xóa entity, tìm kiếm theo khóa chính, và thực hiện query: persist(), merge(), remove(), find(), createQuery()
👉Persistence context là bộ nhớ đệm cấp một (first-level cache), nơi tất cả các entity được lấy ra từ cơ sở dữ liệu hoặc được lưu vào cơ sở dữ liệu. Nó nằm ở giữa ứng dụng của chúng ta và tầng lưu trữ dữ liệu
👉Persistence context theo dõi mọi thay đổi được thực hiện trên managed entity. Nó theo dõi thay đổi của entity. Khi transaction kết thúc, thay đổi này sẽ được flush (ghi ra) vào database
👉Persistence Context chính là nơi Hibernate/JPA giữ các entity đang được quản lý, đảm bảo chúng đồng bộ với database.
👉EntityManager là interface cho phép chúng ta tương tác với persistence context. Bất cứ khi nào chúng ta sử dụng EntityManager, thực chất chúng ta đang làm việc với persistence context.
