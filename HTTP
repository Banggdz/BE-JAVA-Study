BuildingAPI.java

1ï¸âƒ£ @RequestMapping:
CÃ³ tá»« Spring 2.x â†’ Ä‘áº¿n nay váº«n cÃ²n dÃ¹ng Ä‘Æ°á»£c.
NÃ³ lÃ  annotation gá»‘c, cho phÃ©p Ä‘á»‹nh nghÄ©a nhiá»u method HTTP (GET, POST, PUT, DELETEâ€¦)

2ï¸âƒ£ @GetMapping, @PostMapping, @PutMapping, @DeleteMapping:
ÄÆ°á»£c giá»›i thiá»‡u tá»« Spring 4.3 (2016).
LÃ  annotation rÃºt gá»n cá»§a @RequestMapping cho tá»«ng method HTTP.
Code gá»n hÆ¡n, dá»… Ä‘á»c hÆ¡n.
ğŸ‘‰ @RequestBody: thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ liÃªn káº¿t má»™t Ä‘á»‘i tÆ°á»£ng vá»›i má»™t tham sá»‘ trong HTTP request. 
    @RequestBody thÆ°á»ng Ä‘Æ°á»ng dÃ¹ng cÃ¹ng vá»›i cÃ¡c RESTful API nhÆ° POST, PUT.
ğŸ‘‰ @RequestParam: trÃ­ch xuáº¥t thÃ´ng tin tá»« URL.
ğŸ‘‰ @ResponseBody: Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ liÃªn káº¿t dá»¯ liá»‡u tráº£ vá» vá»›i má»™t Ä‘á»‘i tÆ°á»£ng, Spring Boot sáº½ serialize Ä‘á»‘i tÆ°á»£ng nÃ y Ä‘á»ƒ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng JSON hoáº·c XML.

3ï¸âƒ£ @Controller

LÃ  annotation Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ Ä‘Ã¡nh dáº¥u má»™t class lÃ  Controller trong mÃ´ hÃ¬nh MVC.
NÃ³ thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng vá»›i Spring MVC Ä‘á»ƒ tráº£ vá» View (HTML, JSP, Thymeleaf, â€¦) thay vÃ¬ dá»¯ liá»‡u JSON/XML.
Khi return má»™t giÃ¡ trá»‹ tá»« method, Spring sáº½ hiá»ƒu Ä‘Ã³ lÃ  tÃªn View, vÃ  sáº½ Ä‘i tÃ¬m template tÆ°Æ¡ng á»©ng Ä‘á»ƒ render.

ğŸ‘‰ VÃ­ dá»¥:

@Controller
public class HomeController {
    
    @GetMapping("/home")
    public String homePage(Model model) {
        model.addAttribute("message", "Xin chÃ o Spring MVC!");
        return "home"; // Tráº£ vá» file home.html (hoáº·c home.jsp)
    }
}
á» Ä‘Ã¢y "home" lÃ  view name, khÃ´ng pháº£i dá»¯ liá»‡u JSON.

4ï¸âƒ£ @RestController
@RestController = @Controller + @ResponseBody

ğŸ‘‰ Dá»¯ liá»‡u return tá»« method cÃ³ dáº¡ng  JSON/XML, khÃ´ng Ä‘i qua View Resolver.
ThÆ°á»ng dÃ¹ng Ä‘á»ƒ xÃ¢y dá»±ng RESTful API (Web Service).

5ï¸âƒ£ VD:
@Controller
public class BuildingAPI {

    @RequestMapping(value="/api/building/",method = RequestMethod.GET)
    public void getBuilding(@RequestParam(value="name",required=false) String nameBuilding,
    						   @RequestParam(value="numberOfBasement",required=false) Integer numberOfBasement,
    						   @RequestParam(value="ward",required=false) String ward
    		) {
        System.out.print(nameBuilding+" "+numberOfBasement);
    }

  TÃ¬m kiáº¿m trÃªn param
//    @RequestMapping(value="/api/building/",method=RequestMethod.POST)
//    public void getBuilding2(@RequestParam Map<String,String>params) {
//    		System.out.print("ok");
//    }
Láº¥y object JSON tá»« client (body)
    @RequestMapping(value="/api/building/",method=RequestMethod.POST)
    public void getBuilding2(@RequestBody Map<String,String>params) {
    		System.out.print("ok");
    }
}
DÃ¹ng data transfer object

@RequestMapping(value="/api/building/",method=RequestMethod.POST)
    public BuildingDTO getBuilding2(@RequestBody BuildingDTO buildingDTO) {
    		return buildingDTO;
    }

@GetMapping(value="/api/building/")
@ResponseBody
public BuildingDTO getBuilding(@RequestParam(value="name",required=false) String nameBuilding,
    						   @RequestParam(value="numberOfBasement",required=false) Integer numberOfBasement,
    						   @RequestParam(value="ward",required=false) String ward
    		) {
        BuildingDTO result = new BuildingDTO();
        result.setName(nameBuilding);
        result.setNumberOfBasement(numberOfBasement);
        result.setWard(ward);
        return result;
    }
    
--
package com.javaweb.Beans;

public class BuildingDTO {
	private String name;
	private Integer numberOfBasement;
	private String ward;
	private String street;
	public String getName() {
		return name;
	}
	...
}

------------

@RestController
public class BuildingAPI {

    @GetMapping(value="/api/building/")

    public BuildingDTO getBuilding(@RequestParam(value="name",required=false) String nameBuilding,
    						   @RequestParam(value="numberOfBasement",required=false) Integer numberOfBasement,
    						   @RequestParam(value="ward",required=false) String ward
    		) {
        BuildingDTO result = new BuildingDTO();
        result.setName(nameBuilding);
        result.setNumberOfBasement(numberOfBasement);
        result.setWard(ward);
        return result;

List<BuildingDTO> listBuildings = new ArrayList<>();
        BuildingDTO buildingDTO1 = new BuildingDTO();
        buildingDTO1.setName("ABC Building");
        buildingDTO1.setNumberOfBasement(3);
        buildingDTO1.setWard("Tan Mai");
        BuildingDTO buildingDTO2 = new BuildingDTO();
        buildingDTO2.setName("ACM Tower");
        buildingDTO2.setNumberOfBasement(2);
        buildingDTO2.setWard("Da Cao");
        listBuildings.add(buildingDTO1);
        listBuildings.add(buildingDTO2);
        return listBuildings;
    }
    
    @PostMapping(value="/api/building/")
    public BuildingDTO getBuilding2(@RequestBody BuildingDTO buildingDTO) {
    		return buildingDTO;
    }
    @DeleteMapping(value="/api/building/{id}/{name}")
    public void deleteBuilding(@PathVariable Integer id,
    		@PathVariable String name,
    		@RequestParam(value="ward",required=false) String ward
    		) {
    		System.out.print("ÄÃ£ xÃ³a tÃ²a nhÃ  cÃ³ id: "+id+" ten: "+name);   
    }
   
}
