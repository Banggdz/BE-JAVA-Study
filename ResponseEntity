1ï¸âƒ£ KhÃ¡i niá»‡m

ResponseEntity<T> lÃ  generic class.
T lÃ  kiá»ƒu dá»¯ liá»‡u body mÃ  báº¡n muá»‘n tráº£ vá» (cÃ³ thá»ƒ lÃ  object, list, string, v.v.).

Cho phÃ©p báº¡n tÃ¹y chá»‰nh:

Body: dá»¯ liá»‡u tráº£ vá».
Status code: HTTP status (200 OK, 201 Created, 400 Bad Request, 404 Not Foundâ€¦).
Header: cÃ¡c thÃ´ng tin HTTP headers (Content-Type, Authorization, v.v.).

2ï¸âƒ£ Cáº¥u trÃºc cÆ¡ báº£n
ResponseEntity<T> response = ResponseEntity.status(HttpStatus.OK)
                                            .header("Custom-Header", "value")
                                            .body(obj);


Hoáº·c cÃ¡ch ngáº¯n gá»n:
return ResponseEntity.ok(obj); // body = obj, status = 200 OK

3ï¸âƒ£ Má»™t sá»‘ factory method hay dÃ¹ng
Method	                                          Ã nghÄ©a
ok(T body)	                            Tráº£ vá» status 200 OK vá»›i body
created(URI location)	                  Tráº£ vá» 201 Created, kÃ¨m header Location
badRequest().body(T body)    	          Tráº£ vá» 400 Bad Request vá»›i body
notFound().build()	                    Tráº£ vá» 404 Not Found, khÃ´ng cÃ³ body
status(HttpStatus status).body(T body)	Tráº£ vá» status tÃ¹y chá»n vá»›i body

4ï¸âƒ£ VÃ­ dá»¥
@PostMapping
public ResponseEntity<HoaDon> createHoaDon(@RequestBody HoaDon hoaDon) {
    // LÆ°u vÃ o DB
    jdbcTemplate.update("INSERT INTO hoadon (...) VALUES (?, ?, ?)", ...);
    // Láº¥y ID vá»«a insert
    Long maHD = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
    hoaDon.setMaHD(maHD);
    // Tráº£ vá» JSON + HTTP status 200
    return ResponseEntity.ok(hoaDon);
}

Body: hoaDon â†’ JSON tráº£ vá» cho React.
Status: 200 OK.
Header: máº·c Ä‘á»‹nh Spring Ä‘áº·t Content-Type: application/json náº¿u tráº£ object.

5ï¸âƒ£ Náº¿u muá»‘n tráº£ 201 Created + header location:

@PostMapping("/api/hoadon")
public ResponseEntity<HoaDon> createHoaDon(@RequestBody HoaDon hoaDon) {
    jdbcTemplate.update("INSERT INTO hoadon(...) VALUES (?, ?, ?)", ...);
    Long maHD = jdbcTemplate.queryForObject("SELECT LAST_INSERT_ID()", Long.class);
    hoaDon.setMaHD(maHD);

    URI location = URI.create("/api/hoadon/" + maHD);

    return ResponseEntity
            .created(location)  // status 201 Created
            .header("X-Source", "SpringBoot") // custom header
            .body(hoaDon); // JSON body
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ResponseEntity<T>    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Header(s)                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Content-Type: application/json â”‚
â”‚ â”‚ Authorization: Bearer ...     â”‚
â”‚ â”‚ Custom-Header: value          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Body (T)                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ {                       â”‚
â”‚ â”‚   "maHD": 1,           â”‚
â”‚ â”‚   "tenBenhNhan": "An", â”‚
â”‚ â”‚   "ngayLap": "...",    â”‚
â”‚ â”‚   "tongTien": 100000   â”‚
â”‚ â”‚ }                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status Code               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 200 OK                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


HTTP status: 201 Created

Header: Location: /api/hoadon/{maHD}

Body: JSON hoaDon

ğŸ’¡ TÃ³m táº¯t:
ResponseEntity = Body + Status code + Header â†’ giÃºp báº¡n Ä‘iá»u khiá»ƒn hoÃ n toÃ n pháº£n há»“i HTTP cho frontend, ráº¥t há»¯u Ã­ch khi lÃ m API kiá»ƒu React gá»i Spring Boot.
