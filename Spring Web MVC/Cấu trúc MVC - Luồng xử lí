
Tá»•ng quan vá» Spring MVC
Spring MVC (Modelâ€“Viewâ€“Controller) lÃ  má»™t module trong Spring Framework há»— trá»£ xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng web theo mÃ´ hÃ¬nh phÃ¢n lá»›p rÃµ rÃ ng, giÃºp tÃ¡ch biá»‡t pháº§n xá»­ lÃ½ nghiá»‡p vá»¥, Ä‘iá»u hÆ°á»›ng vÃ  giao diá»‡n hiá»ƒn thá»‹.
MÃ´ hÃ¬nh MVC chia á»©ng dá»¥ng thÃ nh ba thÃ nh pháº§n chÃ­nh:
â€¢	Model: Chá»©a dá»¯ liá»‡u vÃ  logic nghiá»‡p vá»¥.
â€¢	View: Hiá»ƒn thá»‹ dá»¯ liá»‡u cho ngÆ°á»i dÃ¹ng (JSP, Thymeleaf, v.v.).
â€¢	Controller: Nháº­n vÃ  xá»­ lÃ½ request tá»« ngÆ°á»i dÃ¹ng, tÆ°Æ¡ng tÃ¡c vá»›i Model, chá»n View Ä‘á»ƒ tráº£ vá».
________________________________________
ğŸŒ€ 1. Trung tÃ¢m cá»§a kiáº¿n trÃºc Spring MVC â€“ DispatcherServlet
 
ğŸ”¹ Vai trÃ²:
DispatcherServlet lÃ  trÃ¡i tim (Front Controller) cá»§a Spring MVC. Má»i request HTTP tá»« client Ä‘á»u Ä‘i qua nÃ³ Ä‘áº§u tiÃªn, sau Ä‘Ã³ nÃ³ sáº½ Ä‘iá»u phá»‘i (dispatch) Ä‘áº¿n cÃ¡c thÃ nh pháº§n thÃ­ch há»£p Ä‘á»ƒ xá»­ lÃ½.
ğŸ”¹ CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng:
1.	Client gá»­i request HTTP Ä‘áº¿n á»©ng dá»¥ng.
2.	Request Ä‘Æ°á»£c DispatcherServlet tiáº¿p nháº­n.
3.	HandlerMapping xÃ¡c Ä‘á»‹nh Controller vÃ  method phÃ¹ há»£p Ä‘á»ƒ xá»­ lÃ½.
4.	Controller xá»­ lÃ½ logic nghiá»‡p vá»¥ vÃ  tráº£ vá» ModelAndView.
5.	ViewResolver chuyá»ƒn tÃªn logic cá»§a view thÃ nh Ä‘Æ°á»ng dáº«n váº­t lÃ½ tá»›i file View (JSP/Thymeleaf...).
6.	View hiá»ƒn thá»‹ dá»¯ liá»‡u vÃ  tráº£ vá» HTML cho trÃ¬nh duyá»‡t ngÆ°á»i dÃ¹ng.
ğŸ”¹ Cáº¥u hÃ¬nh:
â€¢	TrÆ°á»›c Ä‘Ã¢y, DispatcherServlet thÆ°á»ng Ä‘Æ°á»£c khai bÃ¡o trong web.xml.
â€¢	Vá»›i Spring Boot hoáº·c Java-based configuration, quÃ¡ trÃ¬nh nÃ y Ä‘Æ°á»£c tá»± Ä‘á»™ng hÃ³a, nhÆ°ng váº«n cÃ³ thá»ƒ tÃ¹y chá»‰nh thÃ´ng qua lá»›p:
â€¢	public class AppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer { ... }
________________________________________
ğŸ§­ 2. CÃ¡c thÃ nh pháº§n chÃ­nh trong kiáº¿n trÃºc Spring MVC
ğŸ”¸ 2.1 DispatcherServlet (Front Controller)
â€¢	Vai trÃ²: Cá»•ng vÃ o duy nháº¥t cá»§a á»©ng dá»¥ng.
â€¢	Chá»©c nÄƒng:
o	Nháº­n táº¥t cáº£ request HTTP.
o	PhÃ¢n tÃ­ch request.
o	á»¦y quyá»n cho cÃ¡c thÃ nh pháº§n phÃ¹ há»£p xá»­ lÃ½.
o	Tráº£ káº¿t quáº£ response cho client.
________________________________________
ğŸ”¸ 2.2 HandlerMapping (NgÆ°á»i chá»‰ Ä‘Æ°á»ng)
â€¢	Vai trÃ²:
Sau khi nháº­n request, DispatcherServlet sáº½ há»i:
â€œVá»›i URL /san-pham/123, Controller nÃ o sáº½ xá»­ lÃ½?â€
â€¢	CÃ¡ch hoáº¡t Ä‘á»™ng:
HandlerMapping quÃ©t cÃ¡c Controller trong á»©ng dá»¥ng, tÃ¬m phÆ°Æ¡ng thá»©c cÃ³ mapping tÆ°Æ¡ng á»©ng.
â€¢	Triá»ƒn khai phá»• biáº¿n:
RequestMappingHandlerMapping â€“ tÃ¬m kiáº¿m cÃ¡c phÆ°Æ¡ng thá»©c cÃ³ annotation nhÆ°:
o	@RequestMapping
o	@GetMapping
o	@PostMapping
o	@PutMapping, @DeleteMapping, v.v.
________________________________________
ğŸ”¸ 2.3 Controller (NgÆ°á»i xá»­ lÃ½)
â€¢	Vai trÃ²: Thá»±c thi logic nghiá»‡p vá»¥, xá»­ lÃ½ dá»¯ liá»‡u, gá»i service/repository Ä‘á»ƒ xá»­ lÃ½ dá»¯ liá»‡u, rá»“i tráº£ vá» Model + View Ä‘á»ƒ hiá»ƒn thá»‹.
â€¢	Annotation:
o	@Controller â€“ DÃ¹ng cho web app truyá»n thá»‘ng (JSP, Thymeleaf).
o	@RestController â€“ Káº¿t há»£p @Controller + @ResponseBody, chuyÃªn cho RESTful API (tráº£ JSON/XML trá»±c tiáº¿p).
VÃ­ dá»¥:
@Controller
@RequestMapping("/product")
public class ProductController {

    @GetMapping("/{id}")
    public ModelAndView getProduct(@PathVariable int id) {
        ModelAndView mav = new ModelAndView("productDetail");
        mav.addObject("product", productService.getProductById(id));
        return mav;
    }
}
________________________________________
ğŸ”¸ 2.4 ModelAndView (GÃ³i hÃ ng)
â€¢	Vai trÃ²: LÃ  "container" mÃ  Controller tráº£ vá», chá»©a:
o	Model: Dá»¯ liá»‡u (Map cÃ¡c keyâ€“value).
o	View Name: TÃªn logic cá»§a view (vÃ­ dá»¥ "productDetail").
VÃ­ dá»¥:
ModelAndView mav = new ModelAndView("productDetail");
mav.addObject("product", product);
return mav;
________________________________________
ğŸ”¸ 2.5 ViewResolver (NgÆ°á»i phiÃªn dá»‹ch)
â€¢	Vai trÃ²: Dá»‹ch tÃªn view logic thÃ nh file váº­t lÃ½ thá»±c táº¿.
â€¢	VÃ­ dá»¥:
"productDetail" â†’ /WEB-INF/views/productDetail.jsp
â€¢	Triá»ƒn khai phá»• biáº¿n:
o	InternalResourceViewResolver (cho JSP)
o	ThymeleafViewResolver (cho Thymeleaf)
Cáº¥u hÃ¬nh máº«u:
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/"/>
    <property name="suffix" value=".jsp"/>
</bean>
________________________________________
ğŸ”¸ 2.6 View (NgÆ°á»i trÃ¬nh bÃ y)
â€¢	Vai trÃ²: Nháº­n dá»¯ liá»‡u tá»« Model vÃ  render HTML gá»­i vá» client.
â€¢	CÃ´ng nghá»‡ thÆ°á»ng dÃ¹ng:
o	JSP
o	Thymeleaf (Ä‘Æ°á»£c khuyáº¿n khÃ­ch)
o	FreeMarker
o	Velocity
________________________________________
ğŸ§± 3. CÃ¡c khÃ¡i niá»‡m vÃ  tÃ­nh nÄƒng quan trá»ng cá»§a Spring MVC
âš™ï¸ 3.1 Annotations â€“ NgÃ´n ngá»¯ giao tiáº¿p vá»›i Framework
Annotations giÃºp giáº£m cáº¥u hÃ¬nh XML rÆ°á»m rÃ , lÃ m cho code rÃµ rÃ ng vÃ  dá»… hiá»ƒu hÆ¡n.
ğŸ“ 1. @Controller & @RestController
â€¢	@Controller: DÃ¹ng cho á»©ng dá»¥ng cÃ³ View.
â€¢	@RestController: Tá»± Ä‘á»™ng thÃªm @ResponseBody, chuyÃªn cho REST API.
ğŸ“ 2. @RequestMapping vÃ  cÃ¡c biáº¿n thá»ƒ
â€¢	@RequestMapping("/users"): Xá»­ lÃ½ nhiá»u HTTP method.
â€¢	@GetMapping("/users"): Chá»‰ xá»­ lÃ½ GET.
â€¢	@PostMapping("/users"): Chá»‰ xá»­ lÃ½ POST.
â€¢	TÆ°Æ¡ng tá»±: @PutMapping, @DeleteMapping, @PatchMapping.
ğŸ“ 3. Láº¥y dá»¯ liá»‡u tá»« Request
â€¢	@RequestParam â€“ láº¥y tá»« query (?id=123)
â€¢	@PathVariable â€“ láº¥y tá»« URI (/users/{id})
â€¢	@RequestBody â€“ Ã¡nh xáº¡ JSON/XML â†’ Ä‘á»‘i tÆ°á»£ng Java
ğŸ“ 4. Xá»­ lÃ½ dá»¯ liá»‡u tráº£ vá»
â€¢	@ResponseBody â€“ Tráº£ dá»¯ liá»‡u trá»±c tiáº¿p vÃ o body response (JSON/XML).
â€¢	@RestController â€“ bao gá»“m sáºµn @ResponseBody.
ğŸ“ 5. LÃ m viá»‡c vá»›i Model vÃ  Session
â€¢	@ModelAttribute â€“ ThÃªm/tÃ¡i sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng trong Model.
â€¢	@SessionAttributes â€“ Giá»¯ model attribute trong session.
ğŸ“ 6. XÃ¡c thá»±c dá»¯ liá»‡u
â€¢	@Valid / @Validated: KÃ­ch hoáº¡t Bean Validation.
â€¢	CÃ¡c annotation phá»• biáº¿n:
o	@NotNull
o	@Size(min=6, max=20)
o	@Email
o	@Pattern(regexp="...")
________________________________________
ğŸ“¤ 4. Xá»­ lÃ½ Form (Form Handling)
Spring MVC há»— trá»£ Data Binding vÃ  Validation máº¡nh máº½.
ğŸ”¹ Data Binding
Tá»± Ä‘á»™ng liÃªn káº¿t dá»¯ liá»‡u form HTML vÃ o má»™t Ä‘á»‘i tÆ°á»£ng Java (command object).
VÃ­ dá»¥:
@PostMapping("/login")
public String login(@ModelAttribute("user") UserForm form) {
    ...
}
ğŸ”¹ Spring Form Tags (vá»›i JSP)
Cung cáº¥p thÆ° viá»‡n tag <form:form> Ä‘á»ƒ gáº¯n dá»¯ liá»‡u model vá»›i input HTML dá»… dÃ ng.
ğŸ”¹ Validation (XÃ¡c thá»±c)
Spring tÃ­ch há»£p chuáº©n Bean Validation (JSR 303/380) Ä‘á»ƒ Ä‘áº£m báº£o dá»¯ liá»‡u há»£p lá»‡.
________________________________________
âš ï¸ 5. Xá»­ lÃ½ Ngoáº¡i lá»‡ (Exception Handling)
ğŸ“Œ @ExceptionHandler
Xá»­ lÃ½ ngoáº¡i lá»‡ cá»¥c bá»™ trong Controller:
@ExceptionHandler(Exception.class)
public String handleError(Exception ex) {
    return "errorPage";
}
ğŸ“Œ @ControllerAdvice / @RestControllerAdvice
Xá»­ lÃ½ ngoáº¡i lá»‡ toÃ n cá»¥c, Ã¡p dá»¥ng cho toÃ n bá»™ á»©ng dá»¥ng.
________________________________________
ğŸ§© 6. Interceptors (Bá»™ cháº·n)
ğŸ”¹ Vai trÃ²:
Interceptor cho phÃ©p cháº¡y logic trÆ°á»›c, sau hoáº·c sau khi render View, ráº¥t há»¯u Ã­ch cho:
â€¢	Ghi log request.
â€¢	Kiá»ƒm tra xÃ¡c thá»±c, phÃ¢n quyá»n.
â€¢	Gáº¯n dá»¯ liá»‡u chung cho má»i request.
ğŸ”¹ Táº¡o Interceptor:
public class AuthInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest req, HttpServletResponse res, Object handler) {
        // kiá»ƒm tra Ä‘Äƒng nháº­p
        return true;
    }
}
________________________________________
ğŸŒ 7. Há»— trá»£ RESTful Web Services
Spring MVC há»— trá»£ xÃ¢y dá»±ng API REST hiá»‡n Ä‘áº¡i thÃ´ng qua:
â€¢	@RestController
â€¢	Mapping HTTP Methods tÆ°Æ¡ng á»©ng CRUD (POST, GET, PUT, DELETE)
â€¢	Content Negotiation: Tá»± Ä‘á»™ng chuyá»ƒn Ä‘á»•i Java Object â†” JSON/XML tÃ¹y theo Accept Header.
________________________________________
ğŸ“‚ 8. Táº£i tá»‡p lÃªn (File Uploading)
ğŸ”¹ Cáº¥u hÃ¬nh:
Cáº§n cáº¥u hÃ¬nh MultipartResolver Ä‘á»ƒ xá»­ lÃ½ request chá»©a file:
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>
ğŸ”¹ Trong Controller:
@PostMapping("/upload")
public String uploadFile(@RequestParam("file") MultipartFile file) {
    // xá»­ lÃ½ file
    return "uploadSuccess";
}
________________________________________
ğŸŒ 9. Äa ngÃ´n ngá»¯ (Localization â€“ i18n)
ğŸ”¹ Spring cung cáº¥p:
â€¢	ResourceBundleMessageSource â€“ quáº£n lÃ½ file message Ä‘a ngÃ´n ngá»¯.
â€¢	LocaleResolver â€“ xÃ¡c Ä‘á»‹nh locale tá»« trÃ¬nh duyá»‡t hoáº·c session.
ğŸ”¹ Cáº¥u hÃ¬nh:
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename" value="messages"/>
</bean>
VÃ­ dá»¥ file messages_en.properties vÃ  messages_vi.properties cho phÃ©p chuyá»ƒn Ä‘á»•i ngÃ´n ngá»¯ Ä‘á»™ng.
________________________________________
âœ… Káº¿t luáº­n
Spring MVC lÃ  ná»n táº£ng web toÃ n diá»‡n, cung cáº¥p:
â€¢	Kiáº¿n trÃºc rÃµ rÃ ng, tÃ¡ch biá»‡t trÃ¡ch nhiá»‡m.
â€¢	TÃ­ch há»£p máº¡nh máº½ vá»›i Spring Core, Validation, Security, AOP.
â€¢	Há»— trá»£ REST, i18n, file upload, form binding, interceptor, exception handlingâ€¦
â€¢	TÃ¹y biáº¿n cao, dá»… má»Ÿ rá»™ng, dá»… kiá»ƒm thá»­.

