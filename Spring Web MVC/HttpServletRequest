method: https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html

ğŸ§© 1. HttpServletRequest lÃ  gÃ¬?
HttpServletRequest lÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘áº¡i diá»‡n cho yÃªu cáº§u (request) mÃ  client (trÃ¬nh duyá»‡t) gá»­i Ä‘áº¿n server (á»©ng dá»¥ng Java Web) thÃ´ng qua giao thá»©c HTTP.
NÃ³ náº±m trong package: javax.servlet.http.HttpServletRequest

Má»—i khi ngÆ°á»i dÃ¹ng gá»­i yÃªu cáº§u (vÃ­ dá»¥ má»Ÿ trang, báº¥m nÃºt, chuyá»ƒn trang, hoáº·c gá»i API), container servlet (nhÆ° Tomcat, Jetty, v.v.) sáº½ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng HttpServletRequest chá»©a má»i thÃ´ng tin cá»§a request Ä‘Ã³, rá»“i truyá»n vÃ o cÃ¡c phÆ°Æ¡ng thá»©c

âš™ï¸ 2. HttpServletRequest chá»©a nhá»¯ng gÃ¬?

ğŸ”¹ a. ThÃ´ng tin chung cá»§a request
URL, URI, phÆ°Æ¡ng thá»©c HTTP (GET, POST, PUTâ€¦)
Header, Cookie, Session, IP, User-Agent, â€¦

VÃ­ dá»¥:
request.getRequestURI();     // "/building-list"
request.getMethod();         // "GET"
request.getHeader("User-Agent"); // thÃ´ng tin trÃ¬nh duyá»‡t

ğŸ”¹ b. ThÃ´ng tin cÃ¡c tham sá»‘ (parameter) mÃ  ngÆ°á»i dÃ¹ng gá»­i lÃªn

VÃ­ dá»¥: ngÆ°á»i dÃ¹ng truy cáº­p:
http://localhost:8080/building-list?buildingList_page=2&name=abc

â†’ Server nháº­n Ä‘Æ°á»£c 2 request parameter:
buildingList_page = "2"
name = "abc"

Láº¥y ra báº±ng:
String sPage = request.getParameter("buildingList_page"); // "2"
String name = request.getParameter("name");               // "abc"

---
package com.javaweb.utils;

import com.javaweb.model.dto.AbstractDTO;
import org.apache.commons.lang.StringUtils;
import org.displaytag.tags.TableTagParameters;
import org.displaytag.util.ParamEncoder;

import javax.servlet.http.HttpServletRequest;

public class DisplayTagUtils {//private static final Logger log = Logger.getLogger(DisplayTagUtils.class);
ğŸ§© 1ï¸âƒ£ HÃ m DisplayTagUtils.of() dÃ¹ng Ä‘á»ƒ:
Äá»c tham sá»‘ phÃ¢n trang (page) mÃ  thÆ° viá»‡n DisplayTag sinh ra tá»« request,
sau Ä‘Ã³ gÃ¡n láº¡i giÃ¡ trá»‹ trang hiá»‡n táº¡i vÃ o Ä‘á»‘i tÆ°á»£ng dto (lÃ  model báº¡n Ä‘ang hiá»ƒn thá»‹).

public static void of(HttpServletRequest request, AbstractDTO dto) {
        if (dto != null) {
            String sPage = request.getParameter(new ParamEncoder(dto.getTableId()).encodeParameterName(TableTagParameters.PARAMETER_PAGE));
            Integer page = 1;
            if (StringUtils.isNotBlank(sPage)) {
                try {
                    page = Integer.valueOf(sPage);
                } catch (Exception e) {
                    //log.error(e.getMessage());
                }
            }
            dto.setPage(page);
        }
    }
}
ğŸ§© dto.getTableId()
â†’ lÃ  id cá»§a báº£ng DisplayTag mÃ  báº¡n khai bÃ¡o trong JSP.

VÃ­ dá»¥: <display:table id="buildingList" ...>
â†’ thÃ¬ dto.getTableId() = "buildingList"

ğŸ§© TableTagParameters.PARAMETER_PAGE
â†’ lÃ  háº±ng sá»‘ "page" (Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn trong thÆ° viá»‡n displaytag).

ğŸ§© new ParamEncoder("buildingList").encodeParameterName("page")
â†’ DisplayTag sá»­ dá»¥ng ParamEncoder Ä‘á»ƒ mÃ£ hÃ³a tÃªn tham sá»‘ an toÃ n vÃ  khÃ´ng bá»‹ trÃ¹ng giá»¯a nhiá»u báº£ng.
Káº¿t quáº£ cá»§a hÃ m nÃ y lÃ :

"buildingList_page"


ğŸ’¡ ÄÃ¢y chÃ­nh lÃ  tÃªn tháº­t cá»§a tham sá»‘ trong request mÃ  DisplayTag táº¡o ra!
ğŸ§  5ï¸âƒ£ Äá»c tham sá»‘ tá»« request
String sPage = request.getParameter("buildingList_page");


VÃ­ dá»¥:
NgÆ°á»i dÃ¹ng click Trang 2, thÃ¬ URL sáº½ lÃ :

/admin/building-list?buildingList_page=2


â†’ LÃºc nÃ y: sPage = "2"

âš™ï¸ Chuyá»ƒn Ä‘á»•i sang sá»‘ nguyÃªn
Integer page = 1;
if (StringUtils.isNotBlank(sPage)) {
    try {
        page = Integer.valueOf(sPage);
    } catch (Exception e) {
        // náº¿u lá»—i, giá»¯ nguyÃªn máº·c Ä‘á»‹nh lÃ  1
    }
}


Giáº£i thÃ­ch:
        TÃ¬nh huá»‘ng              sPage	  page sau khi cháº¡y
NgÆ°á»i dÃ¹ng chÆ°a chá»n trang nÃ o	null	          1
NgÆ°á»i dÃ¹ng click trang 2	      "2"	            2
Tham sá»‘ lá»—i (vÃ­ dá»¥: abc)	      "abc"	          1 (vÃ¬ lá»—i parse)
ğŸ“¤ GÃ¡n láº¡i vÃ o DTO
dto.setPage(page);

Giá» DTO cá»§a báº¡n (vÃ­ dá»¥ BuildingSearchResponse) sáº½ cÃ³ page = 2.
Sau Ä‘Ã³ Controller cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ truyá»n vÃ o PageRequest.of(page - 1, maxPageItems).
BÆ°á»›c	MÃ´ táº£	VÃ­ dá»¥
1ï¸âƒ£	DisplayTag render báº£ng vá»›i id "buildingList"	<display:table id="buildingList" ...>
2ï¸âƒ£	Khi ngÆ°á»i dÃ¹ng click â€œTrang 2â€	URL: ...?buildingList_page=2
3ï¸âƒ£	DisplayTagUtils.of(request, model) cháº¡y	Äá»c tham sá»‘ "buildingList_page"
4ï¸âƒ£	GÃ¡n model.setPage(2)	Äá»ƒ Controller biáº¿t hiá»ƒn thá»‹ trang thá»© 2

TÃ³m táº¯t:
      DÃ²ng code	                                                                        Ã nghÄ©a
HttpServletRequest request	                                Äáº¡i diá»‡n cho request cá»§a ngÆ°á»i dÃ¹ng (truy cáº­p trang web).
AbstractDTO dto	                                            LÃ  DTO chá»©a dá»¯ liá»‡u phÃ¢n trang, vÃ­ dá»¥ BuildingDTO, cÃ³ thuá»™c tÃ­nh tableId vÃ  page.
dto.getTableId()	                                          Láº¥y ID báº£ng (vÃ­ dá»¥ "buildingList") â€” Ä‘á»ƒ biáº¿t báº£ng nÃ o Ä‘ang Ä‘Æ°á»£c phÃ¢n trang.
new ParamEncoder(dto.getTableId())	                        Táº¡o ra mÃ£ hÃ³a tham sá»‘ Ä‘á»ƒ trÃ¡nh trÃ¹ng tÃªn khi cÃ³ nhiá»u báº£ng DisplayTag trong cÃ¹ng trang.
.encodeParameterName(TableTagParameters.PARAMETER_PAGE)	    Sinh ra tÃªn tham sá»‘ thá»±c táº¿ (vÃ­ dá»¥: "buildingList_page").
request.getParameter(...)	                                  Láº¥y giÃ¡ trá»‹ trang hiá»‡n táº¡i mÃ  ngÆ°á»i dÃ¹ng Ä‘ang chuyá»ƒn Ä‘áº¿n, vÃ­ dá»¥ ?buildingList_page=2.
StringUtils.isNotBlank(sPage)	                              Kiá»ƒm tra xem tham sá»‘ Ä‘Ã³ cÃ³ tá»“n táº¡i hay khÃ´ng.
page = Integer.valueOf(sPage)	                              Chuyá»ƒn chuá»—i "2" thÃ nh sá»‘ 2.
dto.setPage(page)	                                          Ghi láº¡i trang hiá»‡n táº¡i vÃ o DTO, Ä‘á»ƒ controller biáº¿t Ä‘ang á»Ÿ trang sá»‘ máº¥y.
